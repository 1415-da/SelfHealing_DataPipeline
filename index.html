<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Self-Healing Sentiment Analysis Pipeline</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .buttons {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .btn {
            flex: 1;
            min-width: 200px;
            padding: 15px 30px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            font-weight: bold;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(245, 87, 108, 0.4);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .feature-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .feature-card h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .healing-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .healing-item {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
        }

        .healing-item strong {
            color: #856404;
        }

        .pipeline-flow {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .flow-step {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .flow-step-number {
            background: #667eea;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 20px;
            flex-shrink: 0;
        }

        .flow-step-content h4 {
            color: #667eea;
            margin-bottom: 5px;
        }

        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .tech-badge {
            background: #667eea;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-healthy { background: #28a745; }
        .status-warning { background: #ffc107; }
        .status-degraded { background: #ff9800; }
        .status-critical { background: #dc3545; }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            .buttons {
                flex-direction: column;
            }
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ Self-Healing Sentiment Analysis Pipeline</h1>
            <p>AI-Powered Data Pipeline with Automatic Error Detection & Healing</p>
        </div>

        <div class="content">
            <!-- Quick Actions -->
            <div class="section">
                <h2>üöÄ Quick Actions</h2>
                <div class="buttons">
                    <a href="http://localhost:8080" target="_blank" class="btn btn-primary">
                        üìä Airflow Dashboard
                    </a>
                    <a href="http://localhost:8080/dags/self_healing_pipeline/grid" target="_blank" class="btn btn-secondary">
                        üîÑ View DAG Runs
                    </a>
                    <a href="http://localhost:8080/dags/self_healing_pipeline/graph" target="_blank" class="btn btn-primary">
                        üìà DAG Graph View
                    </a>
                </div>
            </div>

            <!-- Overview -->
            <div class="section">
                <h2>üìã Project Overview</h2>
                <p style="font-size: 1.1em; line-height: 1.8; margin-bottom: 20px;">
                    This is a production-ready, AI-powered data pipeline that automatically detects and heals 
                    data quality issues during sentiment analysis of Yelp reviews. Unlike traditional pipelines 
                    that fail on malformed data, this pipeline intelligently diagnoses and fixes problems in real-time.
                </p>
                <div class="tech-stack">
                    <span class="tech-badge">Python 3.12+</span>
                    <span class="tech-badge">Apache Airflow 3.0+</span>
                    <span class="tech-badge">Ollama (LLaMA 3.2)</span>
                    <span class="tech-badge">Self-Healing AI</span>
                    <span class="tech-badge">Batch Processing</span>
                </div>
            </div>

            <!-- Features -->
            <div class="section">
                <h2>‚ú® Key Features</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <h3>üõ°Ô∏è Self-Healing</h3>
                        <p>Automatically fixes missing, malformed, or invalid data without manual intervention</p>
                    </div>
                    <div class="feature-card">
                        <h3>ü§ñ Local LLM</h3>
                        <p>Uses Ollama with LLaMA 3.2 - no external API calls, complete privacy</p>
                    </div>
                    <div class="feature-card">
                        <h3>‚ö° Batch Processing</h3>
                        <p>Configurable batch sizes with offset support for large datasets</p>
                    </div>
                    <div class="feature-card">
                        <h3>üîÑ Parallel Execution</h3>
                        <p>Scale with multiple concurrent DAG runs for faster processing</p>
                    </div>
                    <div class="feature-card">
                        <h3>üìä Health Monitoring</h3>
                        <p>Real-time pipeline health status reporting and metrics</p>
                    </div>
                    <div class="feature-card">
                        <h3>üéØ Graceful Degradation</h3>
                        <p>Falls back to neutral predictions on failures, never crashes</p>
                    </div>
                </div>
            </div>

            <!-- Self-Healing Capabilities -->
            <div class="section">
                <h2>üîß Self-Healing Capabilities</h2>
                <p style="margin-bottom: 20px;">The pipeline automatically detects and heals the following data quality issues:</p>
                <div class="healing-types">
                    <div class="healing-item">
                        <strong>Missing Text</strong><br>
                        Text field is None ‚Üí Fill with placeholder
                    </div>
                    <div class="healing-item">
                        <strong>Empty Text</strong><br>
                        Text is empty/whitespace ‚Üí Fill with placeholder
                    </div>
                    <div class="healing-item">
                        <strong>Wrong Type</strong><br>
                        Text is not a string ‚Üí Type conversion
                    </div>
                    <div class="healing-item">
                        <strong>Special Characters Only</strong><br>
                        No alphanumeric chars ‚Üí Replace with marker
                    </div>
                    <div class="healing-item">
                        <strong>Too Long</strong><br>
                        Exceeds 2000 chars ‚Üí Truncate with ellipsis
                    </div>
                </div>
            </div>

            <!-- Pipeline Flow -->
            <div class="section">
                <h2>üîÑ Pipeline Workflow</h2>
                <div class="pipeline-flow">
                    <div class="flow-step">
                        <div class="flow-step-number">1</div>
                        <div class="flow-step-content">
                            <h4>Load Model</h4>
                            <p>Initialize Ollama model (llama3.2), pull if needed, validate connection</p>
                        </div>
                    </div>
                    <div class="flow-step">
                        <div class="flow-step-number">2</div>
                        <div class="flow-step-content">
                            <h4>Load Reviews</h4>
                            <p>Read reviews from JSON file with configurable batch size and offset</p>
                        </div>
                    </div>
                    <div class="flow-step">
                        <div class="flow-step-number">3</div>
                        <div class="flow-step-content">
                            <h4>Diagnose & Heal</h4>
                            <p>Detect data quality issues and automatically fix problematic records</p>
                        </div>
                    </div>
                    <div class="flow-step">
                        <div class="flow-step-number">4</div>
                        <div class="flow-step-content">
                            <h4>Analyze Sentiment</h4>
                            <p>LLM sentiment classification using Ollama (POSITIVE, NEGATIVE, NEUTRAL)</p>
                        </div>
                    </div>
                    <div class="flow-step">
                        <div class="flow-step-number">5</div>
                        <div class="flow-step-content">
                            <h4>Aggregate Results</h4>
                            <p>Compute statistics, sentiment distribution, healing metrics, write output JSON</p>
                        </div>
                    </div>
                    <div class="flow-step">
                        <div class="flow-step-number">6</div>
                        <div class="flow-step-content">
                            <h4>Generate Health Report</h4>
                            <p>Assess pipeline health status (HEALTHY, WARNING, DEGRADED, CRITICAL)</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Health Status -->
            <div class="section">
                <h2>üíö Health Monitoring</h2>
                <p style="margin-bottom: 20px;">The pipeline generates health status based on processing outcomes:</p>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                    <p style="margin-bottom: 10px;">
                        <span class="status-indicator status-healthy"></span>
                        <strong>HEALTHY:</strong> &lt;50% reviews needed healing, no degradation
                    </p>
                    <p style="margin-bottom: 10px;">
                        <span class="status-indicator status-warning"></span>
                        <strong>WARNING:</strong> &gt;50% reviews needed healing
                    </p>
                    <p style="margin-bottom: 10px;">
                        <span class="status-indicator status-degraded"></span>
                        <strong>DEGRADED:</strong> Some inference failures occurred
                    </p>
                    <p>
                        <span class="status-indicator status-critical"></span>
                        <strong>CRITICAL:</strong> &gt;10% records in degraded state
                    </p>
                </div>
            </div>

            <!-- Output -->
            <div class="section">
                <h2>üìÅ Output</h2>
                <p style="margin-bottom: 15px;">Results are saved to <code>output/</code> directory with timestamped filenames:</p>
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; font-family: monospace;">
                    output/sentiment_analysis_summary_YYYY-MM-DD_HH-MM-SS_OffsetN.json
                </div>
                <p style="margin-top: 15px;">Each output file contains:</p>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li>Run information (timestamp, batch size, offset)</li>
                    <li>Processing totals (success, healed, degraded counts)</li>
                    <li>Success/healing/degradation rates</li>
                    <li>Sentiment distribution (POSITIVE, NEGATIVE, NEUTRAL)</li>
                    <li>Healing statistics by action type</li>
                    <li>Star-sentiment correlation</li>
                    <li>Average confidence scores</li>
                    <li>Detailed results for each review</li>
                </ul>
            </div>

            <!-- Configuration -->
            <div class="section">
                <h2>‚öôÔ∏è Configuration</h2>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                    <h3 style="color: #667eea; margin-bottom: 15px;">DAG Parameters</h3>
                    <ul style="line-height: 2; margin-left: 20px;">
                        <li><strong>input_file:</strong> Path to Yelp reviews JSON file</li>
                        <li><strong>batch_size:</strong> Number of reviews per batch (default: 100)</li>
                        <li><strong>offset:</strong> Starting position in file (default: 0)</li>
                        <li><strong>ollama_model:</strong> Model name (default: llama3.2)</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
